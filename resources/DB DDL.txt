-- DROP SCHEMA rs_notification_service;

CREATE SCHEMA rs_notification_service AUTHORIZATION postgres;

-- DROP SEQUENCE rs_notification_service.application_id_seq;

CREATE SEQUENCE rs_notification_service.application_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;

-- Permissions

ALTER SEQUENCE rs_notification_service.application_id_seq OWNER TO postgres;
GRANT ALL ON SEQUENCE rs_notification_service.application_id_seq TO postgres;

-- DROP SEQUENCE rs_notification_service.application_id_seq1;

CREATE SEQUENCE rs_notification_service.application_id_seq1
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;

-- Permissions

ALTER SEQUENCE rs_notification_service.application_id_seq1 OWNER TO postgres;
GRANT ALL ON SEQUENCE rs_notification_service.application_id_seq1 TO postgres;

-- DROP SEQUENCE rs_notification_service.message_id_seq;

CREATE SEQUENCE rs_notification_service.message_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;

-- Permissions

ALTER SEQUENCE rs_notification_service.message_id_seq OWNER TO postgres;
GRANT ALL ON SEQUENCE rs_notification_service.message_id_seq TO postgres;

-- DROP SEQUENCE rs_notification_service.message_id_seq1;

CREATE SEQUENCE rs_notification_service.message_id_seq1
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;

-- Permissions

ALTER SEQUENCE rs_notification_service.message_id_seq1 OWNER TO postgres;
GRANT ALL ON SEQUENCE rs_notification_service.message_id_seq1 TO postgres;

-- DROP SEQUENCE rs_notification_service.newtable_id_seq;

CREATE SEQUENCE rs_notification_service.newtable_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;

-- Permissions

ALTER SEQUENCE rs_notification_service.newtable_id_seq OWNER TO postgres;
GRANT ALL ON SEQUENCE rs_notification_service.newtable_id_seq TO postgres;

-- DROP SEQUENCE rs_notification_service.notification_id_seq;

CREATE SEQUENCE rs_notification_service.notification_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;

-- Permissions

ALTER SEQUENCE rs_notification_service.notification_id_seq OWNER TO postgres;
GRANT ALL ON SEQUENCE rs_notification_service.notification_id_seq TO postgres;

-- DROP SEQUENCE rs_notification_service.notification_id_seq1;

CREATE SEQUENCE rs_notification_service.notification_id_seq1
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;

-- Permissions

ALTER SEQUENCE rs_notification_service.notification_id_seq1 OWNER TO postgres;
GRANT ALL ON SEQUENCE rs_notification_service.notification_id_seq1 TO postgres;
-- rs_notification_service.application definition

-- Drop table

-- DROP TABLE rs_notification_service.application;

CREATE TABLE rs_notification_service.application (
	id serial4 NOT NULL,
	"name" varchar NULL,
	description varchar NULL,
	CONSTRAINT application_pk PRIMARY KEY (id)
);

-- Permissions

ALTER TABLE rs_notification_service.application OWNER TO postgres;
GRANT ALL ON TABLE rs_notification_service.application TO postgres;


-- rs_notification_service.tag definition

-- Drop table

-- DROP TABLE rs_notification_service.tag;

CREATE TABLE rs_notification_service.tag (
	id serial4 NOT NULL,
	tag_name varchar NOT NULL,
	CONSTRAINT tag_pk PRIMARY KEY (id),
	CONSTRAINT tag_un UNIQUE (tag_name)
);

-- Permissions

ALTER TABLE rs_notification_service.tag OWNER TO postgres;
GRANT ALL ON TABLE rs_notification_service.tag TO postgres;


-- rs_notification_service."event" definition

-- Drop table

-- DROP TABLE rs_notification_service."event";

CREATE TABLE rs_notification_service."event" (
	id int4 NOT NULL DEFAULT nextval('rs_notification_service.newtable_id_seq'::regclass),
	application_id int8 NOT NULL,
	"name" varchar NULL,
	description varchar NULL,
	CONSTRAINT newtable_pk PRIMARY KEY (id),
	CONSTRAINT newtable_fk FOREIGN KEY (application_id) REFERENCES rs_notification_service.application(id)
);

-- Permissions

ALTER TABLE rs_notification_service."event" OWNER TO postgres;
GRANT ALL ON TABLE rs_notification_service."event" TO postgres;


-- rs_notification_service.notification definition

-- Drop table

-- DROP TABLE rs_notification_service.notification;

CREATE TABLE rs_notification_service.notification (
	id serial4 NOT NULL,
	event_id int8 NOT NULL,
	"name" varchar NULL,
	template_subject varchar NULL,
	template_body varchar NULL,
	CONSTRAINT notification_pk PRIMARY KEY (id),
	CONSTRAINT notification_fk FOREIGN KEY (event_id) REFERENCES rs_notification_service."event"(id)
);

-- Permissions

ALTER TABLE rs_notification_service.notification OWNER TO postgres;
GRANT ALL ON TABLE rs_notification_service.notification TO postgres;


-- rs_notification_service."user" definition

-- Drop table

-- DROP TABLE rs_notification_service."user";

CREATE TABLE rs_notification_service."user" (
	id serial4 NOT NULL,
	"name" varchar NULL,
	email varchar NULL,
	"password" varchar NULL,
	application_id int8 NULL,
	CONSTRAINT user_pk PRIMARY KEY (id),
	CONSTRAINT user_fk FOREIGN KEY (application_id) REFERENCES rs_notification_service.application(id)
);

-- Permissions

ALTER TABLE rs_notification_service."user" OWNER TO postgres;
GRANT ALL ON TABLE rs_notification_service."user" TO postgres;


-- rs_notification_service.login definition

-- Drop table

-- DROP TABLE rs_notification_service.login;

CREATE TABLE rs_notification_service.login (
	id int4 NOT NULL DEFAULT nextval('rs_notification_service.logins_id_seq'::regclass),
	user_id int4 NOT NULL,
	"timestamp" varchar NULL,
	CONSTRAINT logins_pk PRIMARY KEY (id),
	CONSTRAINT logins_fk FOREIGN KEY (user_id) REFERENCES rs_notification_service."user"(id)
);

-- Permissions

ALTER TABLE rs_notification_service.login OWNER TO postgres;
GRANT ALL ON TABLE rs_notification_service.login TO postgres;


-- rs_notification_service.message definition

-- Drop table

-- DROP TABLE rs_notification_service.message;

CREATE TABLE rs_notification_service.message (
	id serial4 NOT NULL,
	message_text varchar NULL,
	"timestamp" timestamp NULL,
	notification_type int8 NULL,
	CONSTRAINT message_pk PRIMARY KEY (id),
	CONSTRAINT message_fk FOREIGN KEY (notification_type) REFERENCES rs_notification_service.notification(id)
);

-- Permissions

ALTER TABLE rs_notification_service.message OWNER TO postgres;
GRANT ALL ON TABLE rs_notification_service.message TO postgres;




-- Permissions

GRANT ALL ON SCHEMA rs_notification_service TO postgres;
