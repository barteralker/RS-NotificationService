-- DROP SCHEMA "rs_notification_service";

CREATE SCHEMA "rs_notification_service" AUTHORIZATION postgres;

-- DROP SEQUENCE "rs_notification_service".application_id_seq;

CREATE SEQUENCE "rs_notification_service".application_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE "rs_notification_service".message_id_seq;

CREATE SEQUENCE "rs_notification_service".message_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE "rs_notification_service".newtable_id_seq;

CREATE SEQUENCE "rs_notification_service".newtable_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE "rs_notification_service".notification_id_seq;

CREATE SEQUENCE "rs_notification_service".notification_id_seq
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;

-- Drop table

-- DROP TABLE "rs_notification_service".application;

CREATE TABLE "rs_notification_service".application (
	id serial4 NOT NULL,
	"name" varchar NULL,
	description varchar NULL,
	CONSTRAINT application_pk PRIMARY KEY (id)
);


-- "rs_notification_service"."event" definition

-- Drop table

-- DROP TABLE "rs_notification_service"."event";

CREATE TABLE "rs_notification_service"."event" (
	id int4 NOT NULL DEFAULT nextval('"rs_notification_service".newtable_id_seq'::regclass),
	application_id int8 NOT NULL,
	"name" varchar NULL,
	description varchar NULL,
	CONSTRAINT newtable_pk PRIMARY KEY (id),
	CONSTRAINT newtable_fk FOREIGN KEY (application_id) REFERENCES "rs_notification_service".application(id)
);


-- "rs_notification_service".notification definition

-- Drop table

-- DROP TABLE "rs_notification_service".notification;

CREATE TABLE "rs_notification_service".notification (
	id serial4 NOT NULL,
	event_id int8 NOT NULL,
	"name" varchar NULL,
	template_subject varchar NULL,
	template_body varchar NULL,
	CONSTRAINT notification_pk PRIMARY KEY (id),
	CONSTRAINT notification_fk FOREIGN KEY (event_id) REFERENCES "rs_notification_service"."event"(id)
);


-- "rs_notification_service".message definition

-- Drop table

-- DROP TABLE "rs_notification_service".message;

CREATE TABLE "rs_notification_service".message (
	id serial4 NOT NULL,
	message_text varchar NULL,
	"timestamp" timestamp NULL,
	notification_type int8 NULL,
	CONSTRAINT message_pk PRIMARY KEY (id),
	CONSTRAINT message_fk FOREIGN KEY (notification_type) REFERENCES "rs_notification_service".notification(id)
);

